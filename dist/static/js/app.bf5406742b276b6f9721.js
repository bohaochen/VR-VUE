webpackJsonp([8,6],{0:function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function a(t){return t&&t.__esModule?t:{default:t}}var o=i(207),r=a(o),s=i(203),u=(a(s),i(487)),c=a(u),l=i(470),h=a(l),d=i(486),g=a(d),m=i(173),p=a(m),f=i(201),v=a(f),w=i(199),_=n(w),I=i(465),y=a(I),S=i(202),C=a(S),x=i(200);p.default.interceptors.request.use(function(t){return t.data=y.default.stringify(t.data),t},function(t){return r.default.reject(t)}),p.default.interceptors.response.use(function(t){return t},function(t){return r.default.reject(t)}),c.default.use(g.default),c.default.use(C.default),c.default.filter("timeToNow",x.timeToNow),c.default.filter("dateFormat",x.dateFormat),c.default.filter("numberinteger",x.numberinteger),c.default.prototype.MA=x.MA,c.default.prototype.toast=(0,x.toast)(),c.default.prototype.API=_,c.default.prototype.$http=p.default;var M=new g.default({mode:"history",routes:v.default});M.beforeEach(function(t,e,i){var n=navigator.userAgent,a=!!n.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),o=document.getElementById("loadImg");if(a&&"/"!=t.path&&(isLoadAllImgs=!0,null!=o&&o.remove()),isLoadAllImgs)a&&t.path!==location.pathname?location.assign(t.fullPath):i();else{var r=setInterval(function(){isLoadAllImgs&&(i(),clearInterval(r))},50);loader.start(),o.style.display="block"}}),M.afterEach(function(t,e,i){}),new c.default({el:"#app",template:"<App/>",router:M,components:{App:h.default}}).$mount("#app")},191:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"app",data:function(){return{auto:!0,isloadImgs:!1,preloadingImgs:["https://wx.nullexcept.com/s_static/img/1.jpg","https://wx.nullexcept.com/s_static/img/2.jpg","https://wx.nullexcept.com/s_static/img/3.jpg","https://wx.nullexcept.com/s_static/img/4.jpg"]}},mounted:function(){},watch:{$route:function(t,e){var i=this;i.setShare(t.fullPath)}},methods:{share:function(t,e,i,n){wx.onMenuShareTimeline({title:t,link:e,imgUrl:i,success:function(){},cancel:function(){}}),wx.onMenuShareAppMessage({title:t,desc:n,link:e,imgUrl:i,type:"link",dataUrl:"",success:function(){},cancel:function(){}}),wx.onMenuShareQQ({title:t,desc:n,link:e,imgUrl:i,success:function(){},cancel:function(){}})},setShare:function(t){var e=this,i=(new Date).getTime(),n=window.location.protocol+"//"+window.location.host+t;n=encodeURIComponent(n.split("#")[0]),e.$http.post("v1/em?action=query_config_parm&timestamp="+i+"&url="+n,{}).then(function(t){200==t.data.code&&(wx.config({debug:!1,appId:"wx42c67be9af7fa426",timestamp:t.data.timestamp,nonceStr:t.data.noncestr,signature:t.data.signature,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ"]}),wx.error(function(t){}),wx.ready(function(){wx.checkJsApi({jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ"],success:function(t){var i=(window.localStorage.getItem("openid"),"今年占据平安热搜榜的竟然是TA……"),n="https://wx.nullexcept.com/",a="https://wx.nullexcept.com/static/img/shareImg.png",o="点击探索真相，还有机会赢取iPhoneX！";e.share(i,n,a,o)}})}))}).catch(function(t){console.log(t)})}},components:{}}},198:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"imageClipper",props:{img:String,clipperImgWidth:{type:Number,default:840},clipperImgHeight:{type:Number,default:840}},watch:{img:function(){this.loadImgQueue.push(this.img),this._loadImg()}},data:function(){return{quality:.5,originXDiff:0,originYDiff:0,maskShow:!0,maskShowTimer:null,ctx:null,pCtx:null,actionBarHeight:0,loadImgQueue:[],$img:null,imgLoaded:!1,imgLoading:!1,imgStartWidth:null,imgStartHeight:null,imgCurrentWidth:null,imgCurrentHeight:null,imgX:null,imgY:null,imgScale:1,imgMinScale:1,imgMaxScale:5,imgScaleStep:60,cWidth:0,cHeight:0}},mounted:function(){},beforeDestroy:function(){var t=this.$refs.gesture;t.ontouchstart=null,t.ontouchmove=null,t.outouchend=null},methods:{_initClipper:function(t){this.$nextTick(function(){this.loadImgQueue.push(t),this._initCanvas(),this._loadImg(),this._initEvent()})},_initCanvas:function(){var t=this.$refs.canvas,e=this.$refs.pCanvas,i=this.$refs.clipper.getBoundingClientRect(),n=parseInt(this.clipperImgWidth/window.devicePixelRatio),a=parseInt(this.clipperImgHeight/window.devicePixelRatio);this.ctx=t.getContext("2d"),this.pCtx=e.getContext("2d"),(n<0||n>i.width)&&(n=840),(a<0||a>i.height)&&(a=840),t.style.width=i.width+"px",t.style.height=i.height+"px",t.width=this._ratio(i.width),t.height=this._ratio(i.height),e.style.width=i.width+"px",e.style.height=i.height+"px",e.width=this._ratio(i.width),e.height=this._ratio(i.height);var o=t.getBoundingClientRect(),r=e.getBoundingClientRect();this.originXDiff=r.left-o.left,this.originYDiff=r.top-o.top,this.cWidth=t.width,this.cHeight=t.height},_initEvent:function(){var t=this,e=this.$refs.gesture,i=this.$refs.canvas.getBoundingClientRect(),n=0,a=0,o={},r=this.imgX,s=this.imgY,u=0,c=this.imgScale;e.addEventListener("touchstart",function(e){if(t.imgLoaded)if(1===e.touches.length){var c=e.touches[0];n=c.pageX,a=c.pageY,r=t.imgX,s=t.imgY,o[c.identifier]=c}else if(2===e.touches.length){var l=e.touches[0],h=e.touches[1],d=l.pageX-i.left,g=l.pageY-i.top,m=h.pageX-i.left,p=h.pageY-i.top;n=parseInt((d+m)/2),a=parseInt((g+p)/2),u=t._pointDistance(d,g,m,p),o[l.identifier]=l,o[h.identifier]=h,n<t.imgX&&(n=t.imgX),n>t.imgX+t.imgCurrentWidth&&(n=t.imgX+t.imgCurrentHeight),a<t.imgY&&(a=t.imgY),a>t.imgY+t.imgCurrentHeight&&(a=t.imgY+t.imgCurrentHeight)}},!1),e.addEventListener("touchmove",function(e){if(e.preventDefault(),t.imgLoaded)if(t.maskShowTimer&&clearTimeout(t.maskShowTimer),t.maskShow=!1,1===e.touches.length){var l=e.touches[0].pageX,h=e.touches[0].pageY;t._drawImage(r+l-n,s+h-a,t.imgCurrentWidth,t.imgCurrentHeight)}else if(2===e.touches.length){var d=e.touches[0],g=e.touches[1],m=d.pageX-i.left,p=d.pageY-i.top,f=g.pageX-i.left,v=g.pageY-i.top,w=t._pointDistance(m,p,f,v),_=t.imgScale+parseFloat(((w-u)/t.imgScaleStep).toFixed(1));o[d.identifier]=d,o[g.identifier]=g,_!==c&&(_<t.imgMinScale?_=t.imgMinScale:_>t.imgMaxScale&&(_=t.imgMaxScale),c=_,t._scale(n,a,_))}},!1),e.addEventListener("touchend",function(e){if(t.imgLoaded){t.imgScale=c;var i=Array.prototype.slice.call(e.changedTouches,0);i.forEach(function(t){delete o[t.identifier]});var u=void 0,l=[];for(u in o)o.hasOwnProperty(u)&&l.push(o[u]);l.length>0?(n=l[0].pageX,a=l[0].pageY,r=t.imgX,s=t.imgY):t.maskShowTimer=setTimeout(function(){t.maskShow=!0},300);var h=t.imgX,d=t.imgY,g=t.$refs.pCanvas.getBoundingClientRect();h>g.left+g.width?h=g.left:(h>600||h<-600)&&(h=1,d=1),d>g.top+g.height?d=g.top:(d>600||d<-600)&&(h=1,d=1),t.imgX===h&&t.imgY===d||t._drawImage(h,d,t.imgCurrentWidth,t.imgCurrentHeight)}})},_loadImg:function(){var t=this;if(!this.imgLoading&&0!==this.loadImgQueue.length){var e=this.loadImgQueue.shift();if(e){var i=new Image,n=function e(n){i.removeEventListener("load",e,!1),t.$img=i,t.imgLoaded=!0,t.imgLoading=!1,t._initImg(i.width,i.height),t.$emit("loadSuccess",n),t.$emit("loadComplete",n),t._loadImg()},a=function e(n){i.removeEventListener("error",e,!1),t.$img=i=null,t.imgLoading=!1,t.$emit("loadError",n),t.$emit("loadComplete",n),t._loadImg()};this.$emit("beforeLoad"),this.imgLoading=!0,this.imgLoaded=!1,i.src=this.img,i.crossOrigin="Anonymous",i.addEventListener("load",n,!1),i.addEventListener("error",a,!1)}}},_initImg:function(t,e){var i=null,n=null,a=this.cWidth,o=this.cHeight-this.actionBarHeight;t<=a&&e<=o?(i=t,n=e):t>a&&e<=o?(i=a,n=parseInt(e/t*a)):t<=a&&e>o?(i=parseInt(t/e*o),n=o):e>t?(i=parseInt(t/e*o),n=o):(i=a,n=parseInt(e/t*a)),i<=a&&n<=o?(this.imgStartWidth=i,this.imgStartHeight=n,this._drawImage((a-i)/2,(o-n)/2,i,n)):this._initImg(i,n)},_drawImage:function(t,e,i,n){this._clearCanvas(),this.imgX=parseInt(t),this.imgY=parseInt(e),this.imgCurrentWidth=parseInt(i),this.imgCurrentHeight=parseInt(n),this.ctx.drawImage(this.$img,this._ratio(t),this._ratio(e),this._ratio(i),this._ratio(n)),this.pCtx.drawImage(this.$img,this._ratio(t-this.originXDiff),this._ratio(e-this.originYDiff),this._ratio(i),this._ratio(n))},_clearCanvas:function(){var t=this.$refs.canvas,e=this.$refs.pCanvas;t.width=t.width,t.height=t.height,e.width=e.width,e.height=e.height},_ratio:function(t){return parseInt(t)},_pointDistance:function(t,e,i,n){return parseInt(Math.sqrt((t-i)*(t-i)+(e-n)*(e-n)))},_scale:function(t,e,i){var n=parseInt(this.imgStartWidth*i),a=parseInt(this.imgStartHeight*i),o=parseInt(t-n*(t-this.imgX)/this.imgCurrentWidth),r=parseInt(e-a*(e-this.imgY)/this.imgCurrentHeight);this._drawImage(o,r,n,a)},_clipper:function(){var t=null;try{t=this.$refs.pCanvas.toDataURL("image/png",this.quality)}catch(t){console.error("请在response header加上Access-Control-Allow-Origin，否则canvas无法裁剪未经许可的跨域图片")}this.$emit("ok",t)},_cancel:function(){this.$emit("cancel")},getBase64:function(t){return t.replace(/^data:image\/(png|jpg);base64,/,"")}}}},199:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="v1/me?action=";e.compare=i+"compare"},200:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.numberinteger=e.countFormat=e.dateFormat=e.jsonFormat=e.isLogin=e.timeToNow=e.MA=e.toast=void 0;var a=i(205),o=n(a);e.toast=function t(){var e=!1,t=document.getElementById("toast");return function(i){if(e)return!1;e=!0,t.innerHTML=i,t.classList.add("toast-ain");var n=function i(){t.classList.remove("toast-out"),t.classList.remove("toast-ain"),t.removeEventListener("webkitAnimationEnd",i),e=!1},a=function e(){setTimeout(function(){t.removeEventListener("webkitAnimationEnd",e),t.addEventListener("webkitAnimationEnd",n,!1),t.classList.add("toast-out")},2222)};t.addEventListener("webkitAnimationEnd",a,!1)}},e.MA=function(t,e){t.addEventListener("webkitAnimationEnd",function(){e&&e()},!1)},e.timeToNow=function(t){var e=parseFloat(new Date-new Date(t))/1e3,i=void 0;return e&&(i=e>60&&e<3600?parseInt(e/60,10)+"分钟前":e>=3600&&e<86400?parseInt(e/3600,10)+"小时前":e>=86400&&e<2592e3?parseInt(e/86400,10)+"天前":e>=2592e3&&e<31536e3?parseInt(e/2592e3,10)+"个月前":e>=31536e3?parseInt(e/31536e3,10)+"年前":parseInt(e,10)+"秒前"),i},e.isLogin=function(t,e){try{8888==t&&(console.log("请登录！"),window.localStorage.removeItem("userInfo"),e.$router.replace("/login"))}catch(t){}},e.jsonFormat=function(t){try{return JSON.parse(t)}catch(e){return t}},e.dateFormat=function(t,e){if(""==t||"undefined"==typeof t)return"";t=Number(t),t=new Date(t);var i={M:t.getMonth()+1,d:t.getDate(),h:t.getHours(),m:t.getMinutes(),s:t.getSeconds(),q:Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};return e=e.replace(/([yMdhmsqS])+/g,function(e,n){var a=i[n];return void 0!==a?(e.length>1&&(a="0"+a,a=a.substr(a.length-2)),a):"y"===n?(t.getFullYear()+"").substr(4-e.length):e}),"NaN-aN-aN aN:aN:aN"==e||"1970-01-01 08:00:00"==e?"":e},e.countFormat=function(t){return t=t<10?"0"+t:""+t,t.substr(0,2)},e.numberinteger=function(t){if(t)return(0,o.default)(t).toFixed(2)}},201:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=[{path:"/",name:"首页",component:function(t){i.e(2,function(e){var i=[e(474)];t.apply(null,i)}.bind(this))}},{path:"/vr",name:"全景图",component:function(t){i.e(0,function(e){var i=[e(476)];t.apply(null,i)}.bind(this))}},{path:"/eyes",name:"黑科技就在眼前",component:function(t){i.e(4,function(e){var i=[e(472)];t.apply(null,i)}.bind(this))}},{path:"/ai",name:"查看AI故事",component:function(t){i.e(5,function(e){var i=[e(471)];t.apply(null,i)}.bind(this))}},{path:"/imagerecognition",name:"图像识别",component:function(t){i.e(3,function(e){var i=[e(473)];t.apply(null,i)}.bind(this))}},{path:"/userinfo",name:"录入用户信息",component:function(t){i.e(1,function(e){var i=[e(475)];t.apply(null,i)}.bind(this))}},{path:"*",redirect:"/"}]},202:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(477),o=n(a);e.default={install:function(t){t.component(o.default.name,o.default)}}},456:function(t,e){},459:function(t,e){},470:function(t,e,i){var n,a;i(456),n=i(191);var o=i(478);a=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(a=n=n.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,t.exports=n},477:function(t,e,i){var n,a;i(459),n=i(198);var o=i(481);a=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(a=n=n.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-466bf637",t.exports=n},478:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("transition",{attrs:{name:"bounce"}},[i("router-view")],1)],1)},staticRenderFns:[]}},481:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"clipper",staticClass:"clipper-container"},[i("canvas",{ref:"canvas",staticStyle:{visibility:"hidden"}}),t._v(" "),i("div",{staticClass:"clipper-part"},[i("div",{staticClass:"pCanvas-container"},[i("canvas",{ref:"pCanvas",staticStyle:{width:"100%",height:"100%"}})])]),t._v(" "),i("div",{staticClass:"mask",class:{opacity:t.maskShow}}),t._v(" "),i("div",{ref:"gesture",staticClass:"gesture-mask"})])},staticRenderFns:[]}}});